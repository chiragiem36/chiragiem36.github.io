(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(35)},25:function(e,t,a){},27:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(16),r=a.n(l),c=(a(25),a(11)),i=a(4),o=a(5),m=a(8),u=a(6),d=a(7),h=a(3),p=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.details).map(function(t){var a=e.props.details[t];return s.a.createElement("tr",{key:a.mutual_fund.details.scheme_details_id},s.a.createElement("td",null,e.props.names[t]),s.a.createElement("td",null,a.is_tax_saving_fund?"Yes":"No"),s.a.createElement("td",null,a.mutual_fund.dividend_type),s.a.createElement("td",null,a.plan_type),s.a.createElement("td",null,Math.ceil(10*a.mutual_fund.best_return.percent_change)/10,"%, (",a.mutual_fund.best_return.fromdate," - ",a.mutual_fund.best_return.todate,")"),s.a.createElement("td",null,a.mutual_fund.details.rating),s.a.createElement("td",null,a.mutual_fund.details.minimum_subscription),s.a.createElement("td",null,a.mutual_fund.details.scheme_type),s.a.createElement("td",null,a.mutual_fund.details.scheme_class),s.a.createElement("td",null,a.mutual_fund.details.minimum_balance_maintainence),s.a.createElement("td",null,a.mutual_fund.details.yoy_return),s.a.createElement("td",null,a.mutual_fund.details.return_3yr),s.a.createElement("td",null,a.mutual_fund.details.return_5yr),s.a.createElement("td",null,a.mutual_fund.details.amc.launch_date))});return s.a.createElement("div",{className:"comparision col-xs-12 basic-details"},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"col-xs-6"},"Basic Details")),s.a.createElement("table",{className:"row table table-bordered table-responsive"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Mutual Fund"),s.a.createElement("th",null,"Tax Savings ?"),s.a.createElement("th",null,"Dividend Type"),s.a.createElement("th",null,"Plan Type"),s.a.createElement("th",null,"%age change",s.a.createElement("br",null),"(from - to)"),s.a.createElement("th",null,"Ratings"),s.a.createElement("th",null,"Min. Subscription"),s.a.createElement("th",null,"Scheme type"),s.a.createElement("th",null,"Scheme class"),s.a.createElement("th",null,"Min Balance"),s.a.createElement("th",null,"YOY Return"),s.a.createElement("th",null,"3year Return"),s.a.createElement("th",null,"5year Return"),s.a.createElement("th",null,"launch"))),s.a.createElement("tbody",null,t)))}}]),t}(n.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.details).map(function(t){var a=e.props.details[t],n=a.holdings.top_10_holdings.values.map(function(e,t){return s.a.createElement("td",{key:t.toString()+"-company"},s.a.createElement("span",{className:"text-primary"},e.script),s.a.createElement("br",null)," ",s.a.createElement("span",{className:"text-success"},e.allocation_percentage,"%"),s.a.createElement("br",null),e.instrument)});return s.a.createElement("tr",{key:a.mutual_fund.details.scheme_details_id},s.a.createElement("td",null,e.props.names[t]),n)});return s.a.createElement("div",{className:"comparision col-xs-12 holdings"},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"col-xs-6"},"Top 10 Holdings")),s.a.createElement("table",{className:"row table table-bordered table-responsive"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Mutual Fund"),s.a.createElement("th",null,"1st"),s.a.createElement("th",null,"2nd"),s.a.createElement("th",null,"3rd"),s.a.createElement("th",null,"4th"),s.a.createElement("th",null,"5th"),s.a.createElement("th",null,"6th"),s.a.createElement("th",null,"7th"),s.a.createElement("th",null,"8th"),s.a.createElement("th",null,"9th"),s.a.createElement("th",null,"10th"))),s.a.createElement("tbody",null,t)))}}]),t}(n.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.details).map(function(t){var a=e.props.details[t],n=a.holdings.top_5_sectors.values.map(function(e,t){return s.a.createElement("td",{key:t.toString()+"-sector"},s.a.createElement("span",{className:"text-primary"},e.sector),s.a.createElement("br",null)," ",s.a.createElement("span",{className:"text-success"},e.allocation_percentage,"%"),s.a.createElement("br",null),e.instrument)});return s.a.createElement("tr",{key:a.mutual_fund.details.scheme_details_id},s.a.createElement("td",null,e.props.names[t]),n)});return s.a.createElement("div",{className:"comparision col-xs-12 sectors"},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"col-xs-6"},"Top 5 Sectors")),s.a.createElement("table",{className:"row table table-bordered table-responsive"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Mutual Fund"),s.a.createElement("th",null,"1st"),s.a.createElement("th",null,"2nd"),s.a.createElement("th",null,"3rd"),s.a.createElement("th",null,"4th"),s.a.createElement("th",null,"5th"))),s.a.createElement("tbody",null,t)))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(m.a)(this,Object(u.a)(t).call(this,e)),console.log(e),a.state={details:a.props.details},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{style:{maxHeight:window.innerHeight-50+"px",overflowY:"scroll"},className:"comparision col-sm-7 col-md-8 col-lg-9 col-xs-12"},s.a.createElement("div",{className:"row"},s.a.createElement(p,{names:this.props.names,details:this.props.details}),s.a.createElement(E,{names:this.props.names,details:this.props.details}),s.a.createElement(b,{names:this.props.names,details:this.props.details})))}}]),t}(n.Component),f=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(m.a)(this,Object(u.a)(t).call(this,e)),console.log(e);var n=!1,s=!0;return window.innerWidth<721&&(n=!0,s=!1),a.state={show:s,mobile:n,details:{},search:a.props.search,res:a.props.res,sortBy:"risk",sortOrder:1,selectedFunds:{},names:{}},a.inputHandler=a.inputHandler.bind(Object(h.a)(Object(h.a)(a))),a.selectFund=a.selectFund.bind(Object(h.a)(Object(h.a)(a))),a.compare=a.compare.bind(Object(h.a)(Object(h.a)(a))),a.hide=a.hide.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"compare",value:function(){this.setState({show:!0})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"inputHandler",value:function(e){var t=e.target.type;if(console.log(),"select-one"===t){var a=e.target.value;this.setState(Object(c.a)({},e.target.name,a))}}},{key:"selectFund",value:function(e){var t=this,a=this.state.selectedFunds,n=this.state.names;a[e.details_id]?(delete a[e.details_id],delete n[e.details_id],this.setState({selectedFunds:a}),this.setState({names:n}),document.getElementById(e.details_id).style.backgroundColor="white"):(document.getElementById(e.details_id).style.backgroundColor="lightblue",n[e.details_id]=e.name,this.setState({names:n}),this.xhr("GET","https://api.piggy.co.in/v1/mf/?key="+e.details_id).then(function(t){a[e.details_id]=t.data}).then(function(){t.setState({selectedFunds:a}),console.log(t.state.names)}))}},{key:"xhr",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(s,l){var r=new XMLHttpRequest;r.open(e,t,!0),a.state.headers&&a.state.headers.length>0&&a.state.headers.forEach(function(e){r.setRequestHeader(e.header,e.value)}),r.onreadystatechange=function(){4===r.readyState&&200===r.status?s(JSON.parse(r.response)):4===r.readyState&&200!==r.status&&l(new Error("Failed to fetch resource"))},r.send(JSON.stringify(n))})}},{key:"render",value:function(){var e,t,a=this;if(0===this.state.search.length)e=s.a.createElement("span",{className:"col-xs-12",id:"empty-result"},"Enter something to search");else if(this.state.search.length>0&&(!this.state.res.data||0===this.state.res.data.search_results_count))e=s.a.createElement("span",{className:"col-xs-12",id:"empty-result"},"nothing found");else{var n=this.state.res.data.search_results.sort(function(e,t){var n=a.state.sortOrder;if("rating"===a.state.sortBy)return n*(t.rating-e.rating);if("risk"===a.state.sortBy){var s={High:4,"Moderately High":3,Moderate:2,"Moderately Low":1,Low:0},l=s[t.riskometer]-s[e.riskometer];return l>1?l=1:l<-1&&(l=-1),n*l}return"min"===a.state.sortBy?n*(t.minimum_investment-e.minimum_investment):null});t=Object.keys(this.state.selectedFunds).length>0?s.a.createElement(v,{names:this.state.names,details:this.state.selectedFunds}):null,e=n.map(function(e,t){for(var n=[],l=0;l<e.rating;++l)n.push(s.a.createElement("span",{key:"icon-"+l,className:"glyphicon glyphicon-star text-warning"}));return s.a.createElement("div",{className:"row card mutual-fund",id:e.details_id,onClick:function(t){return a.selectFund(e)},key:e.details_id},s.a.createElement("div",{className:"card-heading col-xs-12"},e.name),s.a.createElement("div",{className:"card-heading tags col-xs-12"},s.a.createElement("span",null,"#",e.category),s.a.createElement("span",null,"#",e.sub_category)),s.a.createElement("div",{className:"col-xs-11"},s.a.createElement("div",{className:"row investment"},s.a.createElement("span",{className:"col-xs-4"},"min. - ",s.a.createElement("br",null),"INR ",e.minimum_investment/1e3,"K"),s.a.createElement("span",{className:"col-xs-4"},"3yr return - ",s.a.createElement("span",{className:"text-success"},e.return_3yr,"%")),s.a.createElement("span",{className:"col-xs-4"},"5yr return - ",s.a.createElement("span",{className:"text-success"},e.return_5yr,"%")))),s.a.createElement("div",{className:"card-body col-xs-12"},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"col-xs-6 risk"},"Risk -",s.a.createElement("span",{className:e.riskometer.toLowerCase().replace("","")},e.riskometer)),s.a.createElement("span",{className:"col-xs-6 risk"},"Ratings -",s.a.createElement("span",{className:e.rating},n)))))})}return s.a.createElement("div",{className:"row"},s.a.createElement("button",{id:"compare-button",className:"btn btn-primary",onClick:this.compare,style:{display:Object.keys(this.state.selectedFunds).length>0&&this.state.mobile&&!this.state.show?"block":"none"}},"Show details or compare"),s.a.createElement("button",{id:"list-button",className:"btn btn-danger",onClick:this.hide,style:{display:this.state.mobile&&this.state.show?"block":"none"}},"Back to list"),s.a.createElement("div",{style:{display:this.state.mobile&&!this.state.show||!this.state.mobile?"block":"none"},className:"col-sm-5 col-md-4 col-lg-3 col-xs-12"},s.a.createElement("div",{className:"row list"},s.a.createElement("div",{className:"col-xs-12"},s.a.createElement("div",{className:"row",id:"action-bar"},s.a.createElement("span",{className:"col-xs-5 col-xs-offset-1 sort-by"},s.a.createElement("span",null,"Sort By"),s.a.createElement("select",{name:"sortBy",value:this.state.sortBy,onChange:this.inputHandler},s.a.createElement("option",{value:"risk"},"risk"),s.a.createElement("option",{value:"rating"},"rating"),s.a.createElement("option",{value:"min"},"minimum investment"),s.a.createElement("option",{value:"max"},"max investment"))),s.a.createElement("span",{className:"col-xs-4 col-xs-offset-1 sort-order"},s.a.createElement("span",null,"Order"),s.a.createElement("select",{name:"sortOrder",value:this.state.sortOrder,onChange:this.inputHandler},s.a.createElement("option",{value:"1"},"Descending"),s.a.createElement("option",{value:"-1"},"Ascending"))))),s.a.createElement("div",{className:"col-xs-12",style:{maxHeight:window.innerHeight-91+"px",overflowY:"scroll"}},e))),s.a.createElement("div",{style:{display:this.state.mobile&&this.state.show||!this.state.mobile?"hidden":"block"}},t))}}]),t}(n.Component),y=(a(27),a(37)),g=a(38),_=a(17),O=a.n(_)()(),w=function(e){function t(e){var a;if(Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={search:"",response:{},searchUrl:"https://api.piggy.co.in/v2/mf/search/",headers:[{header:"content-type",value:"application/json"}]},window.location.search.length>0){a.state.search=window.location.search.slice(1);var n={search:a.state.search,filters:{minimum_investments:-1,minimumInvestment:-1}};a.fetchData("POST",a.state.searchUrl,n)}return a.inputHandler=a.inputHandler.bind(Object(h.a)(Object(h.a)(a))),a.fetchData=a.fetchData.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"inputHandler",value:function(e){if("text"===e.target.type){var t=e.target.value;if("search"===e.target.name){if(this.setState(Object(c.a)({},e.target.name,t)),O.push("/search?"+t),0===t.length)return console.log(!1),void this.setState({response:{}});var a={search:t,filters:{minimum_investments:-1,minimumInvestment:-1}};this.fetchData("POST",this.state.searchUrl,a)}}}},{key:"fetchData",value:function(e,t,a){var n=this;this.xhr(e,t,a).then(function(e){n.setState({response:e})}).catch(function(e){console.error(e)})}},{key:"xhr",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(s,l){var r=new XMLHttpRequest;r.open(e,t,!0),a.state.headers&&a.state.headers.length>0&&a.state.headers.forEach(function(e){r.setRequestHeader(e.header,e.value)}),r.onreadystatechange=function(){4===r.readyState&&200===r.status?s(JSON.parse(r.response)):4===r.readyState&&200!==r.status&&l(new Error("Failed to fetch resource"))},r.send(JSON.stringify(n))})}},{key:"render",value:function(){var e=this;return s.a.createElement(y.a,null,s.a.createElement("div",{className:"row text-center"},s.a.createElement("div",{id:"nav",className:"col-xs-12"},s.a.createElement("div",{className:"row"},s.a.createElement("input",{className:"col-xs-12",placeholder:"Enter name of mutual fund to search",name:"search",value:this.state.search,onChange:this.inputHandler}))),s.a.createElement("div",{className:"col-xs-12"},s.a.createElement(g.a,{path:"/",component:function(){return s.a.createElement(f,{res:e.state.response,search:e.state.search})}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.4cc1baff.chunk.js.map